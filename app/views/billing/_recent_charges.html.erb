<% if charges.present? %>
  <div class="table-responsive">
    <table class="table align-middle mb-0">
      <thead>
        <tr>
          <th>Date</th>
          <th>Amount</th>
          <th>Status</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
      <% charges.each do |c| %>
        <tr>
          <td><%= l(c.created_at, format: :long) %></td>
          <td><%= number_to_currency(c.amount.to_i / 100.0) %> <span class="text-uppercase small text-muted"><%= c.currency %></span></td>
          <% refunded = c.respond_to?(:refunded?) ? c.refunded? : (c.amount_refunded.to_i > 0) %>
          <td><span class="badge <%= refunded ? 'bg-warning' : 'bg-success' %>"><%= refunded ? 'refunded' : 'paid' %></span></td>
          <td class="text-end"><%= link_to 'Receipt', billing_receipt_path(c), class: 'btn btn-sm btn-outline-secondary' %></td>
        </tr>
      <% end %>
      </tbody>
    </table>
  </div>
<% else %>
  <p class="text-muted mb-0">No recent charges.</p>
<% end %>
