<div class="container mt-5">
  <div class="text-center mb-5">
    <h1 class="display-4">Choose Your Plan</h1>
    <p class="lead">Select the plan that best fits your needs</p>
  </div>

  <div class="row mb-5">
    <div class="col-12 text-center mb-4">
      <div class="btn-group" role="group">
        <button type="button" class="btn btn-outline-primary active" id="monthly-btn">Monthly</button>
        <button type="button" class="btn btn-outline-primary" id="annual-btn">Annual (Save 16%)</button>
      </div>
    </div>
  </div>

  <div class="row" id="monthly-plans">
    <% [:basic, :pro, :enterprise].each do |plan_key| %>
      <% plan = @plans[plan_key] %>
      <div class="col-md-4 mb-4">
        <div class="card h-100 shadow-sm">
          <div class="card-header text-center">
            <h4 class="my-0 font-weight-bold"><%= plan[:name] %></h4>
          </div>
          <div class="card-body d-flex flex-column">
            <h1 class="card-title pricing-card-title text-center">
              $<%= sprintf('%.2f', plan[:price]) %> <small class="text-muted">/ <%= plan[:interval] %></small>
            </h1>
            <ul class="list-unstyled mt-3 mb-4">
              <% plan[:features].each do |feature| %>
                <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i> <%= feature %></li>
              <% end %>
            </ul>
            <div class="mt-auto text-center">
              <%= link_to "Subscribe", new_subscription_path(plan: plan_key), class: "btn btn-lg btn-primary w-100" %>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>

  <div class="row d-none" id="annual-plans">
    <% [:basic_annual, :pro_annual, :enterprise_annual].each do |plan_key| %>
      <% plan = @plans[plan_key] %>
      <div class="col-md-4 mb-4">
        <div class="card h-100 shadow-sm">
          <div class="card-header text-center">
            <h4 class="my-0 font-weight-bold"><%= plan[:name] %></h4>
          </div>
          <div class="card-body d-flex flex-column">
            <h1 class="card-title pricing-card-title text-center">
              $<%= sprintf('%.2f', plan[:price]) %> <small class="text-muted">/ <%= plan[:interval] %></small>
            </h1>
            <ul class="list-unstyled mt-3 mb-4">
              <% plan[:features].each do |feature| %>
                <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i> <%= feature %></li>
              <% end %>
            </ul>
            <div class="mt-auto text-center">
              <%= link_to "Subscribe", new_subscription_path(plan: plan_key), class: "btn btn-lg btn-primary w-100" %>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>

  <div class="row mt-5">
    <div class="col-12 text-center">
      <h3>Need a custom solution?</h3>
      <p class="lead">Contact us for custom enterprise pricing and features.</p>
      <%= link_to "Contact Sales", "pages/contact", class: "btn btn-outline-primary btn-lg" %>
    </div>
  </div>

  <div class="row mt-5">
    <div class="col-12 text-center">
      <h3>One-time Payment</h3>
      <p class="lead">Need to make a one-time payment instead?</p>
      <%= link_to "Make a Payment", new_payment_path, class: "btn btn-outline-secondary btn-lg" %>
    </div>
  </div>
</div>

<script>
  document.addEventListener('turbo:load', function() {
    const monthlyBtn = document.getElementById('monthly-btn');
    const annualBtn = document.getElementById('annual-btn');
    const monthlyPlans = document.getElementById('monthly-plans');
    const annualPlans = document.getElementById('annual-plans');

    monthlyBtn.addEventListener('click', function() {
      monthlyBtn.classList.add('active');
      annualBtn.classList.remove('active');
      monthlyPlans.classList.remove('d-none');
      annualPlans.classList.add('d-none');
    });

    annualBtn.addEventListener('click', function() {
      annualBtn.classList.add('active');
      monthlyBtn.classList.remove('active');
      annualPlans.classList.remove('d-none');
      monthlyPlans.classList.add('d-none');
    });
  });
</script> 