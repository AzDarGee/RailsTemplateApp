<div class="message p-3 <%= message.role == 'User' ? 'message-user' : 'message-agent' %>" 
     id="<%= dom_id(message) %>"
     data-controller="message"
     data-action="turbo:before-stream-render->message#refresh">
  <div class="message-content" data-message-target="content">
    <%= markdown(message.content) %>
  </div>
  <div class="message-time text-end">
    <%= message.created_at.strftime('%I:%M %p') %>
  </div>
</div>