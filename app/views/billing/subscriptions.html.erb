<div class="container py-4">
  <div class="row">
    <div class="col-12">
      <div class="card shadow-sm">
        <div class="card-header d-flex justify-content-between align-items-center">
          <h5 class="mb-0">Your Subscriptions</h5>
          <%= link_to "Billing Dashboard", billing_dashboard_path, class: "btn btn-sm btn-outline-secondary" %>
        </div>
        <div class="card-body">
          <div id="billing_subscriptions_table">
            <%= render partial: "billing/subscriptions_table", locals: { subscriptions: @subscriptions } %>
          </div>
          <% if @subscriptions.blank? %>
            <div class="mt-3">
              <%= link_to "Browse plans", pages_pricing_path, class: "btn btn-outline-primary" %>
            </div>
          <% end %>
        </div>
      </div>

      <% if current_user.payment_processor.processor.to_s == 'paddle' && ENV['PADDLE_CUSTOMER_PORTAL_URL'].present? %>
        <div class="alert alert-info mt-3 d-flex justify-content-between align-items-center">
          <div>
            Manage your Paddle subscription in the customer portal.
          </div>
          <a href="<%= ENV['PADDLE_CUSTOMER_PORTAL_URL'] %>" target="_blank" rel="noopener" class="btn btn-outline-primary">Open Paddle Portal</a>
        </div>
      <% end %>
    </div>
  </div>
</div>
